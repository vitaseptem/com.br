<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vita Septem – Página Inicial | Men's Fashion</title>
  <meta name="description" content="Vita Septem: moda masculina premium, clean e elegante. Conecte-se às coleções, lançamentos e páginas de campanha." />
  <meta name="theme-color" content="#880c21" />
  <!-- Open Graph -->
  <meta property="og:title" content="Vita Septem – Página Inicial" />
  <meta property="og:description" content="Moda masculina premium, clean e elegante. Descubra sua melhor versão." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="icon.png" />
  <meta property="og:locale" content="pt_BR" />
  <!-- Fonts & Favicon -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="icon.ico">

  <style>
  :root{
    --wine:#880c21; --wine-600:#a11837; --black:#0e0e0f; --gray-900:#17171a;
    --gray-800:#1c1c20; --gray-700:#232327; --gray-500:#8c8c94; --white:#ffffff;
    --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html{scroll-behavior:smooth}
  html,body{height:100%}
  body{
    margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--white); background:linear-gradient(180deg,var(--black),var(--gray-900) 35%, #0b0b0c);
    -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  }
  a{color:inherit; text-decoration:none}
  .container{max-width:1200px; margin:0 auto; padding:0 20px}

  /* Header */
  header{position:sticky; top:0; z-index:90; backdrop-filter:saturate(140%) blur(8px);
    background:rgba(13,13,15,.7); border-bottom:1px solid rgba(255,255,255,.06)}
  .nav{display:flex; align-items:center; justify-content:space-between; padding:12px 0}
  .brand{display:flex; align-items:center; gap:12px}
  .brand img{height:76px; width:auto; object-fit:contain}

  .nav-actions{display:flex; align-items:center; gap:10px}
  .cta{display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px; font-weight:600;
       background:var(--wine); border:1px solid rgba(255,255,255,.1); box-shadow:var(--shadow)}
  .cta:hover{background:var(--wine-600)}

  /* Desktop nav + Dropdown */
  .nav-links{display:flex; align-items:center; gap:14px}
  .nav-links a{padding:10px 12px; border:1px solid transparent; border-radius:12px}
  .nav-links a:hover{border-color:rgba(255,255,255,.12); background:#151517}

  .dropdown{position:relative}
  .drop-btn{
    display:inline-flex; align-items:center; gap:8px; padding:10px 12px;
    border-radius:12px; border:1px solid rgba(255,255,255,.12); background:#121214; color:#fff; cursor:pointer
  }
  .drop-btn:hover{background:#151517}
  .drop-menu{
    position:absolute; right:0; top:calc(100% + 8px); width:320px; max-height:70vh; overflow:auto;
    background:#0f0f11; border:1px solid rgba(255,255,255,.12); border-radius:14px; padding:10px; display:none;
    box-shadow:var(--shadow)
  }
  .dropdown.open .drop-menu{display:block}
  .drop-menu a{display:block; padding:10px 12px; border-radius:10px; border:1px solid transparent}
  .drop-menu a:hover{background:#151517; border-color:rgba(255,255,255,.08)}

  /* Hamburger (mobile) */
  .hamburger{display:none; background:transparent; border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:10px}
  .hamburger span{display:block; width:22px; height:2px; background:#fff; margin:4px 0}

  /* Mobile drawer */
  .drawer{position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; z-index:95}
  .drawer.open{display:block}
  .sheet{position:absolute; right:0; top:0; bottom:0; width:86vw; max-width:360px; background:#0f0f11; border-left:1px solid rgba(255,255,255,.1); padding:16px; overflow:auto}
  .sheet a{display:block; padding:12px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.08); margin-bottom:10px}
  .sheet a:hover{background:#151517}

  /* Hero */
  .hero{position:relative; overflow:hidden; isolation:isolate}
  .hero::before{
    content:""; position:absolute; inset:-20%;
    background: radial-gradient(80% 60% at 70% 20%, rgba(136,12,33,.35), transparent 60%),
               radial-gradient(60% 40% at 10% 10%, rgba(255,255,255,.08), transparent 60%);
    z-index:-1; filter:blur(10px)
  }
  .hero-grid{display:grid; grid-template-columns:1.1fr .9fr; gap:36px; align-items:center; padding:64px 0}
  .kicker{color:#e9e9ea; letter-spacing:.14em; text-transform:uppercase; font-size:.82rem}
  h1{margin:.35rem 0 1rem; font-family:"Playfair Display",serif; font-weight:700;
     font-size:clamp(2.1rem, 3.2vw + 1rem, 3.6rem); line-height:1.05;}
  .lead{color:#d9d9dd; font-size:1.05rem; max-width:52ch}
  .actions{display:flex; gap:12px; margin-top:22px; flex-wrap:wrap}
  .btn{display:inline-flex; align-items:center; gap:10px; padding:12px 18px; border-radius:14px; font-weight:600;
       background:var(--wine); border:1px solid rgba(255,255,255,.1); box-shadow:var(--shadow);
       transition:transform .15s ease, background .2s ease, box-shadow .2s ease;}
  .btn:hover{background:var(--wine-600); transform:translateY(-1px)}
  .btn.secondary{background:transparent; border-color:rgba(255,255,255,.18)}
  .hero-visual{background:linear-gradient(180deg,#141416, #0d0d0f);
    border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); min-height:360px;
    display:grid; place-items:center; position:relative; overflow:hidden}
  .hero-visual img{width:100%; height:100%; object-fit:cover}
  .tag{position:absolute; top:14px; right:14px; padding:6px 10px; border-radius:999px;
    background:rgba(136,12,33,.18); border:1px solid rgba(136,12,33,.5); font-size:.78rem}

  /* Sections */
  section{padding:56px 0}
  .section-title{font-family:"Playfair Display",serif; font-weight:700; font-size:2rem; margin:0 0 14px}
  .muted{color:#cfcfd6; margin:0 0 26px}
  .grid{display:grid; gap:18px; grid-template-columns:repeat(12,1fr)}

  /* Hub cards */
  .hub .card{grid-column:span 4; background:linear-gradient(180deg,#141416,#101013);
    border:1px solid rgba(255,255,255,.08); border-radius:16px; overflow:hidden; transition:transform .15s ease;}
  .hub .card:hover{transform:translateY(-3px)}
  .hub .card img{width:100%; height:180px; object-fit:cover; background:#0f0f11}
  .hub .card .p{padding:14px}
  .badge{background:rgba(136,12,33,.22); border:1px solid rgba(136,12,33,.55); padding:4px 10px; border-radius:999px; font-size:.78rem}

  /* Products */
  .card{grid-column:span 4; background:linear-gradient(180deg,#141416,#101013);
    border:1px solid rgba(255,255,255,.08); border-radius:16px; overflow:hidden; transition:transform .15s ease;}
  .card:hover{transform:translateY(-3px)}
  .card img{width:100%; height:260px; object-fit:cover; background:#0f0f11}
  .card .p{padding:14px 14px 16px}
  .price{display:flex; align-items:center; justify-content:space-between; margin-top:6px}
  .price s{color:#9a9aa3; font-size:.95rem}
  .price strong{font-size:1.1rem}
  .buy{margin-top:12px; width:100%; text-align:center; padding:10px 12px; border-radius:12px; background:#1a1a1e; border:1px solid rgba(255,255,255,.12)}
  .buy:hover{border-color:rgba(255,255,255,.22)}
  .empty{display:grid; place-items:center; height:200px; color:#cfcfd6; border:1px dashed rgba(255,255,255,.12); border-radius:14px}

  /* Feature row */
  .feature{display:grid; grid-template-columns:1fr 1fr; gap:24px; align-items:center;
    background:linear-gradient(180deg,#151517,#131317);
    border:1px solid rgba(255,255,255,.08); border-radius:20px; padding:20px}
  .feature img{width:100%; height:100%; max-height:420px; object-fit:cover; border-radius:16px}

  /* Footer */
  footer{border-top:1px solid rgba(255,255,255,.08); padding:28px 0 60px; color:#cfcfd6}
  .brand-small{display:flex; gap:10px; align-items:center}
  .brand-small img{width:28px; height:28px}
  .footer-grid{display:grid; grid-template-columns:1.2fr .8fr; gap:22px}
  .social a{display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border:1px solid rgba(255,255,255,.12); border-radius:12px; margin-right:10px}

  /* WhatsApp FAB */
  .fab{position:fixed; right:18px; bottom:18px; background:#25D366; color:#000; font-weight:700;
    padding:12px 14px; border-radius:999px; box-shadow:var(--shadow); z-index:100}

  /* Responsive */
  @media (max-width: 1100px){
    .nav-links{display:none}
    .hamburger{display:block}
  }
  @media (max-width: 980px){
    .hero-grid{grid-template-columns:1fr; padding:44px 0}
    .feature{grid-template-columns:1fr}
    .grid .card{grid-column:span 6}
    .footer-grid{grid-template-columns:1fr}
    .brand img{height:72px}
    .hub .card img{height:160px}
  }
  @media (max-width: 640px){
    .grid .card{grid-column:span 12}
    .brand img{height:64px}
    .hub .card img{height:150px}
  }
  </style>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"ClothingStore",
    "name":"Vita Septem – Men's Fashion",
    "address":{"@type":"PostalAddress","addressLocality":"São João do Caru","addressRegion":"MA","addressCountry":"BR"},
    "url":"https://vitaseptem.github.io/com.br",
    "logo":"icon.png",
    "sameAs":["https://www.instagram.com/vitaseptem"]
  }
  </script>
</head>
<body>
  <!-- FAB WhatsApp -->
  <a href="https://wa.me/5599981543912?text=Quero%20meu%20look%20Vita%20Septem" class="fab" aria-label="Falar no WhatsApp">WhatsApp</a>

  <!-- Header -->
  <header>
    <div class="container nav">
      <a class="brand" href="#hero" aria-label="Ir para o início">
        <img src="icon2.png" alt="Logo Vita Septem" />
      </a>

      <!-- Desktop links -->
      <nav class="nav-links" aria-label="Navegação principal">
        <a href="#colecao">Catálogo</a>
        <a href="alfaiataria.html">Alfaiataria</a>

        <div class="dropdown" id="ddExplorar">
          <button class="drop-btn" id="btnDrop" aria-haspopup="true" aria-expanded="false" aria-controls="menuExplorar">
            Explorar <span aria-hidden="true">▾</span>
          </button>
          <div class="drop-menu" id="menuExplorar" role="menu">
            <a href="colecoes.html" role="menuitem">1. Coleções</a>
            <a href="lancamento.html" role="menuitem">2. Lançamento Exclusivo</a>
            <a href="relampago.html" role="menuitem">3. Promoção Relâmpago</a>
            <a href="kits.html" role="menuitem">4. Vesti-se Bem, Gasta Pouco</a>
            <a href="ocasioes.html" role="menuitem">5. Estilo por Ocasião</a>
            <a href="clube.html" role="menuitem">6. Assinatura Mensal</a>
            <a href="educativo.html" role="menuitem">7. Conteúdo Educativo</a>
            <a href="campanha.html" role="menuitem">8. Campanha Temática</a>
            <a href="sobre.html" role="menuitem">9. Conheça a Marca</a>
            <a href="parcerias.html" role="menuitem">10. Influenciadores & Afiliados</a>
          </div>
        </div>
      </nav>

      <div class="nav-actions">
        <a class="cta" href="#colecao">Ver coleção</a>
        <button class="hamburger" id="btnMenu" aria-label="Abrir menu">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>

    <!-- Mobile drawer -->
    <div class="drawer" id="drawer" aria-hidden="true">
      <div class="sheet" role="dialog" aria-label="Menu">
        <a href="#hero" data-close>Início</a>
        <a href="#colecao" data-close>Catálogo</a>
        <a href="alfaiataria.html" data-close>Alfaiataria</a>
        <a href="colecoes.html" data-close>1. Coleções</a>
        <a href="lancamento.html" data-close>2. Lançamento Exclusivo</a>
        <a href="relampago.html" data-close>3. Promoção Relâmpago</a>
        <a href="kits.html" data-close>4. Vesti-se Bem, Gasta Pouco</a>
        <a href="ocasioes.html" data-close>5. Estilo por Ocasião</a>
        <a href="clube.html" data-close>6. Assinatura Mensal</a>
        <a href="educativo.html" data-close>7. Conteúdo Educativo</a>
        <a href "campanha.html" data-close>8. Campanha Temática</a>
        <a href="sobre.html" data-close>9. Conheça a Marca</a>
        <a href="parcerias.html" data-close>10. Influenciadores & Afiliados</a>
        <a href="https://wa.me/5599981543912?text=Quero%20um%20atendimento%20Vita%20Septem" data-close>Falar no WhatsApp</a>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section id="hero" class="hero">
      <div class="container hero-grid">
        <div>
          <div class="kicker">Men’s Fashion • Premium</div>
          <h1>Elegância que não grita. <br/>Apenas impõe respeito.</h1>
          <p class="lead">Camisas, polos e alfaiataria de caimento impecável, para quem valoriza presença e bom gosto.</p>
          <div class="actions">
            <a href="#colecao" class="btn">Explorar coleção</a>
            <a href="alfaiataria.html" class="btn secondary">Ver Alfaiataria</a>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px">
            <a class="btn secondary" href="colecoes.html" style="padding:8px 12px">Coleções</a>
            <a class="btn secondary" href="lancamento.html" style="padding:8px 12px">Lançamento</a>
            <a class="btn secondary" href="relampago.html" style="padding:8px 12px">Relâmpago</a>
            <a class="btn secondary" href="parcerias.html" style="padding:8px 12px">Parcerias</a>
          </div>
        </div>
        <div class="hero-visual" role="img" aria-label="Editorial Vita Septem">
          <span class="tag">Coleção 2026</span>
          <img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?q=80&w=1400&auto=format&fit=crop" alt="Editorial Vita Septem">
        </div>
      </div>
    </section>

    <!-- HUB DE LANDINGS (cards) -->
    <section aria-labelledby="ttl-hub" class="hub">
      <div class="container">
        <h2 class="section-title" id="ttl-hub">Explore nossas páginas</h2>
        <p class="muted">Acesse rapidamente cada campanha e experiência da Vita Septem.</p>
        <div class="grid">
          <article class="card"><a href="colecoes.html"><img src="https://images.unsplash.com/photo-1509631179647-0177331693ae?q=80&w=1400&auto=format&fit=crop" alt="Coleções"><div class="p"><div style="display:flex;justify-content:space-between;align-items:center"><h3 style="margin:0">1. Coleções</h3><span class="badge">Lookbooks</span></div><p class="muted" style="margin:6px 0 0">Temas como Outono, Verão e Clássicos.</p></div></a></article>
          <article class="card"><a href="lancamento.html"><img src="https://images.unsplash.com/photo-1516822003754-cca485356ecb?q=80&w=1400&auto=format&fit=crop" alt="Lançamento"><div class="p"><h3 style="margin:0">2. Lançamento Exclusivo</h3><p class="muted" style="margin:6px 0 0">Produto premium + lista VIP.</p></div></a></article>
          <article class="card"><a href="relampago.html"><img src="https://images.unsplash.com/photo-1511285560929-80b456fea0bc?q=80&w=1400&auto=format&fit=crop" alt="Relâmpago"><div class="p"><h3 style="margin:0">3. Promoção Relâmpago</h3><p class="muted" style="margin:6px 0 0">Desconto por tempo limitado.</p></div></a></article>
          <article class="card"><a href="kits.html"><img src="https://images.unsplash.com/photo-1520975922284-54243f13c6d1?q=80&w=1400&auto=format&fit=crop" alt="Kits"><div class="p"><h3 style="margin:0">4. Vesti-se Bem, Gasta Pouco</h3><p class="muted" style="margin:6px 0 0">Combos com preço reduzido.</p></div></a></article>
          <article class="card"><a href="ocasioes.html"><img src="https://images.unsplash.com/photo-1528701800489-20be3c2ea4f1?q=80&w=1400&auto=format&fit=crop" alt="Ocasiões"><div class="p"><h3 style="margin:0">5. Estilo por Ocasião</h3><p class="muted" style="margin:6px 0 0">Trabalho, Casual, Noite…</p></div></a></article>
          <article class="card"><a href="clube.html"><img src="https://images.unsplash.com/photo-1512446733611-9099a758e63e?q=80&w=1400&auto=format&fit=crop" alt="Clube"><div class="p"><h3 style="margin:0">6. Clube Vita Septem</h3><p class="muted" style="margin:6px 0 0">Peças mensais e benefícios.</p></div></a></article>
          <article class="card"><a href="educativo.html"><img src="https://images.unsplash.com/photo-1516826957135-700dedea698c?q=80&w=1400&auto=format&fit=crop" alt="Educativo"><div class="p"><h3 style="margin:0">7. Conteúdo Educativo</h3><p class="muted" style="margin:6px 0 0">Dicas + e-book.</p></div></a></article>
          <article class="card"><a href="campanha.html"><img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=1400&auto=format&fit=crop" alt="Campanha"><div class="p"><h3 style="margin:0">8. Campanha Temática</h3><p class="muted" style="margin:6px 0 0">Datas especiais.</p></div></a></article>
          <article class="card"><a href="sobre.html"><img src="https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=1400&auto=format&fit=crop" alt="Sobre"><div class="p"><h3 style="margin:0">9. Conheça a Marca</h3><p class="muted" style="margin:6px 0 0">História e valores.</p></div></a></article>
          <article class="card"><a href="parcerias.html"><img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?q=80&w=1400&auto=format&fit=crop" alt="Parcerias"><div class="p"><h3 style="margin:0">10. Influenciadores & Afiliados</h3><p class="muted" style="margin:6px 0 0">Comissões e inscrição.</p></div></a></article>
        </div>
      </div>
    </section>

    <!-- CATÁLOGO ENXUTO (produtos principais) -->
    <section id="colecao">
      <div class="container">
        <h2 class="section-title">Coleção Principal</h2>
        <p class="muted">Peças essenciais, cortes limpos e cores sóbrias.</p>
        <div class="grid" id="grid"></div>
        <div id="gridEmpty" class="empty" style="display:none">Sem produtos disponíveis.</div>
        <div class="actions" style="margin-top:16px">
          <a class="btn" href="colecoes.html">Ver lookbooks</a>
          <a class="btn secondary" href="alfaiataria.html">Ver Alfaiataria</a>
        </div>
      </div>
    </section>

    <!-- FEATURE -->
    <section>
      <div class="container">
        <div class="feature">
          <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=1400&auto=format&fit=crop" alt="Detalhe de alfaiataria" />
          <div>
            <h3 class="section-title">Alfaiataria com propósito</h3>
            <p class="muted">Tecidos respiráveis, cortes modernos e durabilidade.</p>
            <a href="alfaiataria.html" class="btn">Alfaiataria</a>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTATO -->
    <section>
      <div class="container footer-grid" role="contentinfo">
        <div>
          <h3 class="section-title" style="margin-top:0">Visite a loja</h3>
          <p class="muted">Rua Nova, Centro – São João do Caru / MA<br/>Seg–Sáb: 9h às 19h</p>
          <div class="social">
            <a href="https://wa.me/5599981543912?text=Quero%20um%20atendimento%20Vita%20Septem">WhatsApp</a>
            <a href="https://www.instagram.com/vitaseptem" target="_blank" rel="noopener">Instagram</a>
          </div>
        </div>
        <div aria-hidden="true">
          <iframe title="Mapa da loja" width="100%" height="220" style="border:0; border-radius:14px"
            loading="lazy" referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps?q=São%20João%20do%20Caru%20MA&output=embed"></iframe>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap">
      <div class="brand-small">
        <img src="icon.png" alt="" aria-hidden="true">
        <span>© <span id="year"></span> Vita Septem – Men’s Fashion</span>
      </div>
      <small>Desenvolvido para performance e conversão.</small>
    </div>
  </footer>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // ====== Config ======
    const SUPABASE_URL = "https://dwqkuwqmlhvplmgwksas.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR3cWt1d3FtbGh2cGxtZ3drc2FzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3ODM4NjksImV4cCI6MjA3MDM1OTg2OX0._pFblnBzx5cf0SUfAC_w-kmcdFbidZsh23XKXJR98ng";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { auth:{ persistSession:false }});
    const WHATSAPP = "5599981543912";
    const toBRL = (cents)=> (cents/100).toLocaleString('pt-BR',{style:'currency',currency:'BRL'});

    document.getElementById('year').textContent = new Date().getFullYear();

    // ====== Desktop dropdown ======
    const dd = document.getElementById('ddExplorar');
    const btnDrop = document.getElementById('btnDrop');
    const menuDrop = document.getElementById('menuExplorar');

    function openDrop(){
      dd.classList.add('open');
      btnDrop.setAttribute('aria-expanded','true');
      // foca o primeiro item
      const first = menuDrop.querySelector('a');
      first && first.focus();
    }
    function closeDrop(){
      dd.classList.remove('open');
      btnDrop.setAttribute('aria-expanded','false');
    }
    btnDrop.addEventListener('click', (e)=>{
      e.stopPropagation();
      dd.classList.contains('open') ? closeDrop() : openDrop();
    });
    document.addEventListener('click', (e)=>{
      if(!dd.contains(e.target)) closeDrop();
    });
    window.addEventListener('keydown', (e)=>{
      if(e.key==='Escape') closeDrop();
    });

    // ====== Mobile drawer ======
    const drawer = document.getElementById('drawer');
    const btnMenu = document.getElementById('btnMenu');
    const sheet = drawer.querySelector('.sheet');
    function openDrawer(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); }
    function closeDrawer(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }
    btnMenu.addEventListener('click', ()=> drawer.classList.contains('open') ? closeDrawer() : openDrawer());
    drawer.addEventListener('click', (e)=>{ if(e.target === drawer) closeDrawer(); });
    sheet.querySelectorAll('[data-close]').forEach(a=> a.addEventListener('click', closeDrawer));
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(); });

    // ====== Catálogo (home) ======
    const grid = document.getElementById('grid');
    const gridEmpty = document.getElementById('gridEmpty');

    function cardTemplate(p){
      const sizes = (p.product_sizes||[]).sort((a,b)=> (a.sort_order||100)-(b.sort_order||100));
      const selectId = `size-${p.id}`;
      const primary = pickPrimaryImage(p.product_images||[]);
      const imgUrl = primary?.url || "https://images.unsplash.com/photo-1520975922284-54243f13c6d1?q=80&w=1200&auto=format&fit=crop";
      const alt = primary?.alt || p.title;

      return `
        <article class="card" id="${p.slug}">
          <img src="${imgUrl}" alt="${alt}">
          <div class="p">
            <div style="display:flex; align-items:center; justify-content:space-between; gap:10px">
              <h3 style="margin:0; font-size:1.05rem">${p.title}</h3>
              ${p.badge ? `<span class="badge">${p.badge}</span>` : ``}
            </div>
            <div style="color:#9c9ca3; font-size:.9rem; margin-top:4px">SKU: ${p.sku}</div>
            <div class="price">
              <div>${p.compare_at_cents>0 ? `<s>${toBRL(p.compare_at_cents)}</s>` : ``}</div>
              <strong>${toBRL(p.price_cents)}</strong>
            </div>

            ${sizes.length ? `
              <select id="${selectId}" aria-label="Selecionar tamanho para ${p.title}"
                style="margin-top:10px; width:100%; padding:10px 12px; background:#121214; color:#fff; border:1px solid rgba(255,255,255,.12); border-radius:12px">
                <option value="">Escolha o tamanho (opcional)</option>
                ${sizes.map(s=> `<option value="${s.label}">${s.label}</option>`).join('')}
              </select>` : ``}

            <a class="buy" href="#" data-id="${p.id}" data-title="${p.title}" data-sku="${p.sku}"
               data-price="${p.price_cents}" data-slug="${p.slug}" data-select="${selectId}"
               onclick="return buy(this)">
              Comprar pelo WhatsApp
            </a>
          </div>
        </article>
      `;
    }

    function pickPrimaryImage(imgs){
      if(!imgs.length) return null;
      const sorted = [...imgs].sort((a,b)=>{
        if((b.is_primary|0)!==(a.is_primary|0)) return (b.is_primary?1:0)-(a.is_primary?1:0);
        return (a.sort_order||100)-(b.sort_order||100);
      });
      return sorted[0];
    }

    function renderProducts(list){
      grid.innerHTML = "";
      if(!list.length){ gridEmpty.style.display = "grid"; return; }
      gridEmpty.style.display = "none";
      list.slice(0,6).forEach(p=> grid.insertAdjacentHTML('beforeend', cardTemplate(p)));
    }

    function buy(el){
      const title = el.dataset.title;
      const sku = el.dataset.sku;
      const priceCents = Number(el.dataset.price||0);
      const selectId = el.dataset.select;
      const size = selectId ? (document.getElementById(selectId)?.value || "") : "";
      const sizeTxt = size ? ` | Tamanho: ${size}` : "";
      const link = `${location.href.split('#')[0]}#${el.dataset.slug}`;
      const msg = `Olá! Quero comprar: ${title}${sizeTxt} | SKU: ${sku} | Preço: ${(priceCents/100).toLocaleString('pt-BR',{style:'currency',currency:'BRL'})} | Link: ${link}`;
      const url = `https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`;
      window.open(url, '_blank');
      return false;
    }
    window.buy = buy;

    async function load(){
      const { data, error } = await supabase
        .from('products')
        .select(`
          id, sku, title, description, slug, price_cents, compare_at_cents, badge, sort_order,
          product_images ( url, alt, is_primary, sort_order ),
          product_sizes ( label, sort_order )
        `)
        .eq('category','principal')
        .eq('is_active', true)
        .order('sort_order', { ascending:true });

      if(error){
        console.error(error);
        grid.innerHTML = `<div class="empty">Erro ao carregar produtos.</div>`;
        return;
      }
      renderProducts(data || []);
    }
    load();
  </script>
</body>
</html>
